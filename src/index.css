@tailwind base;
@tailwind components;
@tailwind utilities;

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here. 
All colors MUST be HSL.
*/

@layer base {
  :root {
    /* Chat Interface Color Palette */
    --background: 210 20% 98%;
    --foreground: 222 47% 11%;
    --card: 0 0% 100%;
    --card-foreground: 222 47% 11%;
    --popover: 0 0% 100%;
    --popover-foreground: 222 47% 11%;
    
    /* AI Assistant - Primary Green */
    --primary: 160 84% 39%;
    --primary-foreground: 0 0% 100%;
    
    /* User Messages - Blue */
    --user-primary: 217 91% 60%;
    --user-primary-foreground: 0 0% 100%;
    
    --secondary: 220 14% 96%;
    --secondary-foreground: 215 16% 47%;
    --muted: 220 14% 96%;
    --muted-foreground: 215 16% 47%;
    --accent: 220 14% 96%;
    --accent-foreground: 222 47% 11%;
    
    /* Status Colors */
    --alert: 0 84% 60%;
    --alert-foreground: 0 0% 100%;
    --info: 217 91% 60%;
    --info-foreground: 0 0% 100%;
    
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;
    --border: 220 13% 91%;
    --input: 220 13% 91%;
    --ring: 160 84% 39%;
    
    --radius: 1rem; /* 16px rounded corners for chat bubbles */
    
    --sidebar-background: 0 0% 100%;
    --sidebar-foreground: 222 47% 11%;
    --sidebar-primary: 222 47% 11%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 220 14% 96%;
    --sidebar-accent-foreground: 222 47% 11%;
    --sidebar-border: 220 13% 91%;
    --sidebar-ring: 160 84% 39%;
  }

  .dark {
    /* Dark Mode Chat Interface */
    --background: 222 47% 11%; /* #111827 - Dark background */
    --foreground: 210 20% 98%; /* #F9FAFB - Light text */
    --card: 217 33% 17%; /* #1F2937 - Dark message bubbles */
    --card-foreground: 210 20% 98%;
    --popover: 217 33% 17%;
    --popover-foreground: 210 20% 98%;
    
    /* AI Assistant - Primary Green (same) */
    --primary: 160 84% 39%; /* #10B981 */
    --primary-foreground: 0 0% 100%;
    
    /* User Messages - Blue (same) */
    --user-primary: 217 91% 60%; /* #3B82F6 */
    --user-primary-foreground: 0 0% 100%;
    
    --secondary: 217 33% 17%;
    --secondary-foreground: 217 11% 65%; /* #9CA3AF - Lighter gray for dark mode */
    --muted: 217 33% 17%;
    --muted-foreground: 217 11% 65%; /* #9CA3AF - Timestamps in dark mode */
    --accent: 217 33% 17%;
    --accent-foreground: 210 20% 98%;
    
    /* Status Colors (same) */
    --alert: 0 84% 60%; /* Red */
    --alert-foreground: 0 0% 100%;
    --info: 217 91% 60%; /* #3B82F6 */
    --info-foreground: 0 0% 100%;
    
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;
    --border: 215 25% 27%; /* Dark border */
    --input: 215 25% 27%;
    --ring: 160 84% 39%;
    
    --sidebar-background: 222 47% 11%;
    --sidebar-foreground: 210 20% 98%;
    --sidebar-primary: 222 47% 11%;
    --sidebar-primary-foreground: 210 20% 98%;
    --sidebar-accent: 217 33% 17%;
    --sidebar-accent-foreground: 210 20% 98%;
    --sidebar-border: 215 25% 27%;
    --sidebar-ring: 160 84% 39%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground font-sans;
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
    overflow-x: hidden;
  }
}

@layer components {
  /* Chat Interface Styles */
  .chat-interface {
    @apply h-screen flex flex-col bg-background;
  }

  .chat-header {
    @apply bg-card border-b border-border px-6 py-4 flex items-center justify-between shadow-sm z-10;
  }

  .chat-header-left {
    @apply flex items-center gap-3;
  }

  .assistant-avatar {
    @apply w-10 h-10 rounded-full flex items-center justify-center text-xl shadow-md;
    background: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--primary) / 0.8));
  }

  .chat-header-info h2 {
    @apply text-lg font-semibold text-foreground m-0;
  }

  .chat-header-status {
    @apply text-sm text-muted-foreground flex items-center gap-1;
  }

  .status-indicator {
    @apply w-2 h-2 bg-primary rounded-full animate-pulse;
  }

  .chat-messages {
    @apply flex-1 overflow-y-auto p-6 flex flex-col gap-4 scroll-smooth;
  }

  .message {
    @apply flex items-end gap-3 max-w-[85%] animate-messageSlideIn;
  }

  .message.ai-message {
    @apply self-start;
  }

  .message.user-message {
    @apply self-end flex-row-reverse;
  }

  .message-avatar {
    @apply w-8 h-8 rounded-full flex items-center justify-center text-base flex-shrink-0;
  }

  .message-avatar.ai-avatar {
    background: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--primary) / 0.8));
    @apply text-primary-foreground;
  }

  .message-avatar.user-avatar {
    background: linear-gradient(135deg, hsl(var(--user-primary)), hsl(var(--user-primary) / 0.8));
    @apply text-user-primary-foreground;
  }

  .message-bubble {
    @apply rounded-2xl py-3.5 px-4 shadow-sm relative break-words;
  }

  .message-bubble.ai-bubble {
    @apply bg-card text-foreground rounded-bl-md border border-border;
  }

  .message-bubble.user-bubble {
    @apply bg-user-primary text-user-primary-foreground rounded-br-md;
  }

  .message-content {
    @apply text-base leading-relaxed m-0;
  }

  .message-timestamp {
    @apply text-xs text-muted-foreground mt-1 text-right;
  }

  .user-message .message-timestamp {
    @apply text-left;
  }

  .typing-indicator {
    @apply flex items-center gap-2 text-muted-foreground italic text-sm;
  }

  .typing-dots {
    @apply flex gap-1;
  }

  .typing-dot {
    @apply w-1.5 h-1.5 rounded-full bg-primary animate-typingPulse;
  }

  .typing-dot:nth-child(1) { animation-delay: -0.32s; }
  .typing-dot:nth-child(2) { animation-delay: -0.16s; }
  .typing-dot:nth-child(3) { animation-delay: 0s; }

  .chat-input-area {
    @apply bg-card border-t border-border p-4 shadow-sm;
  }

  .chat-input-container {
    @apply flex items-center gap-3 bg-background border border-border rounded-3xl p-2 transition-colors;
  }

  .chat-input-container:focus-within {
    @apply border-primary;
  }

  .chat-input {
    @apply flex-1 border-0 outline-0 bg-transparent text-base py-2 px-3 text-foreground resize-none max-h-[120px] min-h-[40px];
  }

  .chat-input::placeholder {
    @apply text-muted-foreground;
  }

  .input-action-btn {
    @apply w-9 h-9 rounded-full border-0 flex items-center justify-center cursor-pointer transition-all text-base;
  }

  .voice-btn {
    @apply bg-muted text-muted-foreground hover:bg-primary hover:text-primary-foreground;
  }

  .send-btn {
    @apply bg-primary text-primary-foreground hover:bg-primary/90 hover:scale-105;
  }

  .response-options {
    @apply flex flex-col gap-3 mt-4;
  }

  .scale-options {
    @apply grid grid-cols-5 gap-2;
  }

  .scale-option {
    @apply flex flex-col items-center justify-center py-3.5 px-2 border-2 border-border rounded-xl bg-background cursor-pointer transition-all min-h-[70px] text-sm text-center hover:border-primary hover:bg-primary/5 hover:-translate-y-0.5;
  }

  .scale-option.selected {
    @apply border-primary bg-primary text-primary-foreground scale-105;
  }

  .yesno-options {
    @apply flex gap-4 justify-center;
  }

  .yesno-option {
    @apply flex flex-col items-center justify-center py-5 px-8 border-2 border-border rounded-xl bg-background cursor-pointer transition-all min-w-[120px] text-base hover:border-primary hover:bg-primary/5 hover:-translate-y-0.5;
  }

  .yesno-option.selected {
    @apply border-primary bg-primary text-primary-foreground scale-105;
  }

  /* Legacy support for existing components */
  .wellness-card {
    @apply bg-card rounded-xl shadow-lg border border-border/50 p-8;
    backdrop-filter: blur(10px);
  }

  .chat-container {
    @apply min-h-screen bg-gradient-to-br from-background via-background to-secondary/20 flex items-center justify-center p-4;
  }

  .bot-message {
    @apply bg-primary/10 border border-primary/20 rounded-2xl rounded-bl-sm p-6 max-w-md mx-auto;
    animation: slideInLeft 0.6s ease-out, fadeIn 0.6s ease-out;
  }

  .user-response-area {
    @apply bg-card rounded-2xl rounded-tr-sm p-6 mt-4 border border-border/50 shadow-sm;
    animation: slideInRight 0.4s ease-out 0.3s both;
  }

  /* Consent Options */
  .consent-options {
    @apply flex gap-3 justify-center flex-wrap w-full max-w-6xl mx-auto p-4;
  }

  .consent-option {
    @apply flex flex-col items-center p-4 rounded-xl border-2 border-border bg-card text-card-foreground;
    @apply hover:border-primary hover:bg-accent transition-all duration-200 cursor-pointer;
    @apply focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2;
    @apply flex-1 min-w-[200px] max-w-[280px] text-center;
  }

  .consent-option.selected {
    @apply border-primary bg-primary/10 shadow-md;
  }

  .consent-option:hover {
    @apply shadow-lg transform translate-y-[-2px];
  }
}
